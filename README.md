# marathon-elasticsearch 

This is a framework based upon the outstanding work of Chris Kite @ https://github.com/chriskite/elasticsearch-marathon. This framework features deployment of an Elasticsearch cluster on Marathon, using a bootstrap script approach for service discovery of all ES nodes within a cluster. All components of the framework are deployed as Docker containers that extend the official centos:7 image.

Additional Features
-------------------
I've converted all service discovery logic to Python and added a few more elements:

1. Option for Bridge or Host networking for ES nodes
2. Extension of service discovery to enable clustering across Marathon applications and Marathon application groups
3. Load balancing and password-protected access to cluster with nginx
4. Cluster-level kibana analysis via kibana-nginx proxy interface


#marathon-elasticsearch configuration

Environment
-----------
MARATHON_URL=http://<dns name or ip address of Marathon host>:8080

APP_NAME=comma-delimited list of Marathon Elasticsearch node application names

NETWORK_MODE=HOST or BRIDGE

MIN_NUM_MASTER_NODES=sets discovery.zen.minimum_master_nodes

CLUSTER_NAME=sets cluster.name

DATA_DIRECTORIES=sets path.data 


#marathon-es-cluster-nginx configuration

Environment
-----------
MARATHON_URL=http://<dns name or ip address of Marathon host>:8080

APP_NAME=comma-delimited list of Marathon Elasticsearch node application names

CONF_FILE=/etc/nginx/nginx.conf (default) this is where the conf file is generated by the bootstrap script

USERNAME=nginx username

PASSWORD=nginx password


#marathon-es-cluster-kibana configuration

Environment
-----------
MARATHON_URL=http://<dns name or ip address of Marathon host>:8080

NGINX_APP_NAME=comma-delimited list of Marathon application names

USERNAME=username for nginx login

PASSWORD=password for nginx login
